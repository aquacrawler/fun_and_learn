<!--
fl-data-repo - Object repositories component

-->
<dom-module id="fl-data-repo">
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html" >
<template>
    <iron-ajax
            id="ajaxObj"
            handle-as="json"
            verbose="true"
            headers='{"Content-Type":"application/json","Accept":"application/json"}'
            last-response="{{lastResponse}}"
            
        >
    </iron-ajax>
</template>
<script>
    Polymer({
        is : 'fl-data-repo',
        
        ready : function () {
            this.$.ajaxObj.url = this.urls[this.objectType];
            console.log('data-repo url:' + this.urls[this.objectType] );
        },
        
        listeners : {
        },
        
        properties : {
            /* the UI domain object type to be retrieved*/
            objectType : {
                type : String,
                value : 'Student'
            },
            
            /* request method: get or put - direction of data flow */
            method : {
                type : String,
                value : 'get'
            },
            
            /* the sorting by field. the first index takes precedence over the next one*/
            orderBy : {
                type : Array,
                value : ['id']
            },
            
            /* selection criteria used when retrieving Student objects*/
            filterBy : {
                type : Object,
                value : {}
            },
            
            /* latest response from server */
            lastResponse: {
                type: Object,
                notify: true,
            },
        },
        
        getData : function() {
                console.log("get:" + this.$.ajaxObj);
                this.$.ajaxObj.generateRequest();
            },
            
        urls : {
                    Student : '/students'
                }
        }
    );
    
</script>
</dom-module>